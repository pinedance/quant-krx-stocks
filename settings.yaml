# KRX 프로젝트 설정 파일

# 주식 데이터 수집 설정
stocks:
  list:
    market: 'KRX'
    source: 'Naver'  # 종목 리스트 데이터 소스 (KRX, Naver)
    n_universe: 300  # universe 종목 수
    # n_universe: 10  # universe 종목 수 For Test
    n_buffer: 50     # 데이터 미달 종목을 염두한 버퍼
  price:
    periods: 63      # 5년 + 버퍼 3개월    # 몇 개월치 데이터를 가져올지
    # periods: 123   # 10년 + 버퍼 3개월   # 몇 개월치 데이터를 가져올지
    # periods: 243   # 20년 + 버퍼 3개월   # 몇 개월치 데이터를 가져올지
    min_periods: 12     # 최소 충족 데이터 수 (monthly). 충족되지 않는 종목은 drop
    # 위험 종목 제외 여부 (관리종목, 거래정지, 투자주의/경고/위험)
    exclude_risky_stocks: true  # true이면 위험 종목 제외, false이면 모두 포함
    # 데이터 소스 (KRX, NAVER, YAHOO, null=자동)
    download_source: null  # 예: "KRX", "NAVER", "YAHOO" 또는 null
    # 다운로드 방식 (worker 수는 CPU 코어 수로 자동 설정)
    # download_method: batch  # 예: parallel, batch, onebyone
    download_method: parallel  # 예: parallel, batch, onebyone

# Fetcher 모듈 설정
fetcher:
  naver:
    api_url: "https://stock.naver.com/api/domestic/market/stock/default"
    api_referer: "https://stock.naver.com/market/stock/kr/stocklist/capitalization"
    timeout: 10
    page_size: 500
    fetch_special_flags: true  # 특수 종목 플래그 수집 여부
  price:
    batch_threshold: 10  # 이 개수 이하면 batch 모드 자동 적용
    max_workers: null  # ThreadPool worker 수 (null이면 CPU count 사용)

# 분석 기간 설정
signals:
  momentum:
    periods: [12, 36, 60]  # 분석 기간 (개월)
    calculation_periods: [1, 3, 6, 12]  # 13612MR 계산 기간
    rsquared_periods: [3, 6, 12]  # R² 계산 기간
  correlation:
    periods: 12  # 상관관계 계산 기간 (개월)
  macd:
    fast_period: 12  # MACD 단기 EMA 기간
    slow_period: 26  # MACD 장기 EMA 기간
    signal_period: 9  # MACD Signal Line EMA 기간

# 백테스트 설정
backtest:
  # end_date: 2025-01-31  # 백테스트 종료일 (YYYY-MM-DD 형식, null이면 데이터 끝까지)
  end_date: null

# 시각화 설정
visualization:
  scatter_plot:
    periods: [12, 36, 60]
    colors:
      - "#FF6B6B"  # 12개월 - 빨강
      - "#4ECDC4"  # 36개월 - 청록
      - "royalblue"  # 60개월 - 파랑

    # 차트 크기
    height: 600
    width: 800

    # Marker 스타일
    marker:
      size: 8
      opacity: 0.6

    # 추세선 스타일
    trendline:
      width: 1.5
      dash: "dot"  # dot, dash, solid
      opacity: 0.8  # 추세선 투명도

    # 참조선 스타일
    reference_line:
      color: "gray"
      dash: "dash"

    # 축 범위 패딩
    axis_padding:
      positive_multiplier: 1.1
      negative_multiplier: 1.1
      min_multiplier: 0.9

    # 레이아웃
    layout:
      hovermode: "closest"
      showlegend: true

  # Correlation network 설정
  correlation_network:
    threshold: 0.5  # 상관계수 threshold (이상만 엣지 생성)
    layout_seed: 42  # spring layout 시드
    layout_k: 0.5  # spring layout k 파라미터

  dendrogram:
    method: ward
    n_cluster: 25
    height_per_item: 15  # Dendrogram 항목당 높이
    width: 1000  # Dendrogram 너비

# 출력 설정
output:
  base_dir: "output"
  list_dir:
    path: "output/list"
    title: "Stock List"
    desc: "KRX 시장의 전체 종목 리스트 (시가총액 순)"
  price_dir:
    path: "output/price"
    title: "Price Data"
    desc: "종목별 가격 데이터 (일별/월별)"
  signal_dir:
    path: "output/signal"
    title: "Signal Indicators"
    desc: "모멘텀, 성과, 상관관계 지표"
  portfolio_dir:
    path: "output/portfolios"
    title: "Portfolio Selection"
    desc: "전략별 종목 선택 및 포트폴리오 구성"
  backtest_dir:
    path: "output/backtests"
    title: "Backtest Results"
    desc: "전략별 백테스트 성과 분석"
  dashboard_dir:
    path: "output/dashboard"
    title: "Interactive Dashboards"
    desc: "Plotly 인터랙티브 시각화 및 네트워크 분석"

  # HTML 설정
  html:
    float_precision: 6  # 소수 자릿수 (작은 수)
    large_number_precision: 2  # 소수 자릿수 (큰 수)
    large_number_threshold: 1000  # 큰 수 기준

# 템플릿 설정
template:
  base_dir: "templates"

# 로깅 설정
logging:
  level: "INFO"  # DEBUG, INFO, WARNING, ERROR
  format: "%(asctime)s - %(levelname)s - %(message)s"
  file: "log.log"
  console: true

# 프로젝트 설정
project:
  name: "KRX Quantitative Analysis"
  url: "https://pinedance.github.io/quant-krx-stocks/"